<div
  class="flex items-start justify-center min-h-screen bg-gray-100 p-8 space-x-6 flex-wrap"
>
  <!-- Profile Card -->
  <div class="bg-white shadow-lg rounded-2xl p-8 w-96 text-center mb-6">
    <div *ngIf="profile">
      <h2 class="text-2xl font-bold text-gray-800 mb-2">
        Welcome, {{ profile.username }}
      </h2>
      <p class="text-gray-600 mb-6">Email: {{ profile.email }}</p>
    </div>

    <button
      (click)="logout()"
      class="w-full bg-red-500 text-white py-2 px-4 rounded-lg hover:bg-red-600 transition-colors"
    >
      Logout
    </button>
  </div>

  <!-- Friend System Section -->
  <div class="bg-white shadow-lg rounded-2xl p-8 w-[600px]">
    <!-- All Users -->
    <h3 class="text-xl font-semibold mb-2 border-b pb-2">All Users</h3>
    <ul class="space-y-2 mb-6 max-h-60 overflow-y-auto">
      <li
        *ngFor="let user of users || []"
        class="flex items-center justify-between bg-gray-50 p-3 rounded"
      >
        <span>{{ user.username }}</span>
        <button
          *ngIf="canSendRequest(user)"
          (click)="sendRequest(user.id)"
          class="bg-blue-500 text-white px-3 py-1 rounded hover:bg-blue-600"
        >
          {{ getButtonText(user) }}
        </button>
        <div *ngIf="!canSendRequest(user)" class="flex items-center gap-2">
          <span class="px-3 py-1 rounded text-gray-600 bg-gray-200">
            {{ getButtonText(user) }}
          </span>

          <button
            *ngIf="getButtonText(user) === 'Pending'"
            (click)="undoFriendRequest(user.id)"
            class="bg-yellow-500 text-white px-3 py-1 rounded hover:bg-yellow-600"
          >
            Undo
          </button>
          <button
            *ngIf="getButtonText(user) === 'Friend'"
            (click)="unfriendRequest(user.id)"
            class="bg-yellow-500 text-white px-3 py-1 rounded hover:bg-blue-500"
          >
            Unfriend
          </button>
        </div>
      </li>
    </ul>
    <ng-container *ngIf="!users?.length">
      <p class="text-gray-500 mb-6">No users found.</p>
    </ng-container>

    <hr class="my-4" />

    <!-- Sent Friend Requests -->
    <h3 class="text-xl font-semibold mb-2 border-b pb-2">
      Sent Friend Requests
    </h3>
    <ul class="space-y-2 mb-6 max-h-40 overflow-y-auto">
      <li
        *ngFor="let req of sentRequests"
        class="flex items-center justify-between bg-blue-50 p-3 rounded"
      >
        <span>{{ req.receiver?.username }}</span>
        <span class="text-blue-600 text-sm">Pending</span>
      </li>
    </ul>
    <ng-container *ngIf="!sentRequests?.length">
      <p class="text-gray-500 mb-6">No sent requests.</p>
    </ng-container>

    <hr class="my-4" />

    <!-- Pending Friend Requests -->
    <h3 class="text-xl font-semibold mb-2 border-b pb-2">
      Incoming Friend Requests
    </h3>
    <ul class="space-y-2 mb-6 max-h-40 overflow-y-auto">
      <li
        *ngFor="let req of pendingRequests"
        class="flex items-center justify-between bg-yellow-50 p-3 rounded"
      >
        <span>{{ req.requester?.username }}</span>
        <div>
          <button
            (click)="accept(req.id)"
            class="bg-green-500 text-white px-3 py-1 rounded mr-2 hover:bg-green-600"
          >
            Accept
          </button>
          <button
            (click)="reject(req.id)"
            class="bg-red-500 text-white px-3 py-1 rounded hover:bg-red-600"
          >
            Reject
          </button>
        </div>
      </li>
    </ul>
    <ng-container *ngIf="!pendingRequests?.length">
      <p class="text-gray-500 mb-6">No pending requests.</p>
    </ng-container>

    <hr class="my-4" />

    <!-- Friends List -->
    <h3 class="text-xl font-semibold mb-2 border-b pb-2">Your Friends</h3>
    <ul class="space-y-2 max-h-40 overflow-y-auto">
      <li *ngFor="let friend of friends || []" class="bg-green-50 p-3 rounded">
        {{ friend.username }}
      </li>
    </ul>
    <ng-container *ngIf="!friends?.length">
      <p class="text-gray-500">No friends yet.</p>
    </ng-container>
  </div>
</div>
